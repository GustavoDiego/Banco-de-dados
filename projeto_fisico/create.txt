CREATE TABLE Local ( 
    id NUMBER PRIMARY KEY, 
    nome VARCHAR2(100), 
    end_rua VARCHAR2(100), 
    end_numero VARCHAR2(10), 
    end_bairro VARCHAR2(100), 
    end_CEP VARCHAR2(10) NOT NULL, 
    end_cidade VARCHAR2(100) 
);



CREATE TABLE Organizador ( 
    id NUMBER PRIMARY KEY, 
    CNPJ VARCHAR2(14) NOT NULL, 
    nome VARCHAR2(100) NOT NULL, 
    email VARCHAR2(100), 
    telefone VARCHAR2(15)
);



CREATE TABLE Participante ( 
    id NUMBER PRIMARY KEY, 
    categoria VARCHAR2(50), 
    nome VARCHAR2(100) NOT NULL, 
    email VARCHAR2(100), 
    telefone VARCHAR2(15)
);



CREATE TABLE Plataforma_de_Venda ( 
    id NUMBER PRIMARY KEY, 
    nome VARCHAR2(100), 
    site VARCHAR2(200) NOT NULL 
);



CREATE TABLE Evento ( 
    id NUMBER PRIMARY KEY, 
    nome VARCHAR2(100) NOT NULL, 
    data_hora_inicio TIMESTAMP NOT NULL, 
    data_hora_fim TIMESTAMP NOT NULL, 
    descricao VARCHAR2(500), 
    valor_ingresso NUMBER NOT NULL, 
    id_local NUMBER NOT NULL,
    id_organizador NUMBER NOT NULL, 
    CONSTRAINT fk_evento_local FOREIGN KEY (id_local) REFERENCES Local(id),
    CONSTRAINT fk_organizador FOREIGN KEY (id_organizador) REFERENCES Organizador(id) 
);



CREATE TABLE Composto ( 
    id_evento_composto NUMBER NOT NULL, 
    id_evento_compoe NUMBER NOT NULL, 
    CONSTRAINT pk_composto PRIMARY KEY (id_evento_composto, id_evento_compoe),
    CONSTRAINT fk_evento_composto FOREIGN KEY (id_evento_composto) REFERENCES Evento(id), 
    CONSTRAINT fk_evento_compoe FOREIGN KEY (id_evento_compoe) REFERENCES Evento(id)
);



CREATE TABLE Foto ( 
    id_evento NUMBER NOT NULL, 
    titulo VARCHAR2(100) NOT NULL, 
    descricao VARCHAR2(500), 
    CONSTRAINT pk_evento_titulo PRIMARY KEY (id_evento, titulo),
    CONSTRAINT fk_foto_evento FOREIGN KEY (id_evento) REFERENCES Evento(id) 
);



CREATE TABLE Participacao ( 
    id_evento NUMBER NOT NULL, 
    id_participante NUMBER NOT NULL, 
    CONSTRAINT pk_evento_participante PRIMARY KEY (id_evento, id_participante),
    data_hora TIMESTAMP, 
    CONSTRAINT fk_participacao_evento FOREIGN KEY (id_evento) REFERENCES Evento(id), 
    CONSTRAINT fk_participacao_participante FOREIGN KEY (id_participante) REFERENCES Participante(id) 
);


CREATE TABLE Comentario (
    id_coment NUMBER PRIMARY KEY, 
    texto VARCHAR2(500) NOT NULL, 
    data_hora TIMESTAMP, 
    id_evento NUMBER NOT NULL UNIQUE, 
    id_participante NUMBER NOT NULL UNIQUE,
    CONSTRAINT fk_coment_evento_participante FOREIGN KEY (id_evento, id_participante) REFERENCES Participacao(id_evento, id_participante)
);


CREATE TABLE Promocao ( 
    id_evento NUMBER, 
    id_organizador NUMBER, 
    CONSTRAINT pk_evento_organizador PRIMARY KEY (id_evento, id_organizador),
    id_plataforma NUMBER NOT NULL UNIQUE,
    desconto NUMBER, 
    CONSTRAINT fk_promo_plataforma FOREIGN KEY (id_plataforma) REFERENCES Plataforma_de_Venda(id), 
    CONSTRAINT fk_promo_evento FOREIGN KEY (id_evento) REFERENCES Evento(id), 
    CONSTRAINT fk_promo_organizador FOREIGN KEY (id_organizador) REFERENCES Organizador(id)
);